<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <title>鈴蘭の剣 - キャラ検索</title>
</head>
<body>
  <h1>キャラ検索</h1>
  <form method="get" action="/characters">
    <input type="text" name="name" placeholder="名前" value="<%= filters.name || '' %>" />
    <select name="element">
      <option value="">属性(任意)</option>
      <% ["fire","water","wind","earth","light","dark"].forEach(e => { %>
        <option value="<%= e %>" <%= filters.element === e ? 'selected' : '' %>><%= e %></option>
      <% }) %>
    </select>
    <input type="text" name="weapon" placeholder="武器(任意)" value="<%= filters.weapon || '' %>" />
    <select name="rarity">
      <option value="">レア(任意)</option>
      <% [1,2,3,4,5].forEach(r => { %>
        <option value="<%= r %>" <%= String(filters.rarity) === String(r) ? 'selected' : '' %>><%= r %></option>
      <% }) %>
    </select>
    <button type="submit">検索</button>
  </form>

  <ul>
    <% if (results.length === 0) { %>
      <li>該当なし</li>
    <% } %>
    <% results.forEach(c => { %>
      <li>
        <a href="/characters/<%= c.id %>"><%= c.name %></a> / <%= c.element %> / <%= c.weapon %> / ★<%= c.rarity %>
      </li>
    <% }) %>
  </ul>
</body>
</html> 